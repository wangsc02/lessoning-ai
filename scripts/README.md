# æ–‡æ¡£æ„å»ºè„šæœ¬

## ğŸ“‹ ç›®çš„

ç»Ÿä¸€ç®¡ç†æŠ€æœ¯æ–‡æ¡£ä¸­çš„ Mermaid æµç¨‹å›¾ç”Ÿæˆï¼Œç¡®ä¿ï¼š
- âœ… é«˜è´¨é‡è¾“å‡ºï¼ˆ5952px å®½ï¼Œ3x scaleï¼‰
- âœ… æœ¬åœ°å¯æ§ï¼ˆä¸ä¾èµ–ä¸ç¨³å®šçš„åœ¨çº¿ APIï¼‰
- âœ… ä¸€é”®å®Œæˆæ‰€æœ‰æ“ä½œ

## ğŸš€ å®‰è£…ä¾èµ–

```bash
# åªéœ€å®‰è£…ä¸€æ¬¡
npm install -g @mermaid-js/mermaid-cli
```

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### ä¿®æ”¹æµç¨‹å›¾

1. **ç¼–è¾‘æºæ–‡æ¡£**ï¼š
   ```bash
   vim doc/LangChain1.0æ·±åº¦å­¦ä¹ æŒ‡å—.md
   # ä¿®æ”¹ Mermaid ä»£ç å—
   ```

2. **è¿è¡Œæ„å»ºè„šæœ¬**ï¼š
   ```bash
   python scripts/build.py
   ```

3. **æäº¤æ¨é€**ï¼š
   ```bash
   git add doc/images/ doc/*_feishu.md
   git commit -m "docs: æ›´æ–°æµç¨‹å›¾"
   git push
   ```

4. **å¯¼å…¥é£ä¹¦**ï¼š
   - å¤åˆ¶ `doc/LangChain1.0æ·±åº¦å­¦ä¹ æŒ‡å—_feishu.md` çš„å†…å®¹
   - ç²˜è´´åˆ°é£ä¹¦æ–‡æ¡£
   - å›¾ç‰‡ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼ˆä» GitHub åŠ è½½ï¼‰

### ä»é›¶å¼€å§‹

å¦‚æœåˆ é™¤äº†æ‰€æœ‰å›¾ç‰‡ï¼Œé‡æ–°ç”Ÿæˆï¼š

```bash
# åˆ é™¤æ—§å›¾ç‰‡
rm -rf doc/images/

# é‡æ–°ç”Ÿæˆ
python scripts/build.py

# æäº¤
git add -A
git commit -m "docs: é‡æ–°ç”Ÿæˆæ‰€æœ‰æµç¨‹å›¾"
git push
```

## ğŸ”§ é…ç½®è¯´æ˜

ç¼–è¾‘ `scripts/build.py` ä¸­çš„é…ç½®ï¼š

```python
# å›¾ç‰‡è´¨é‡é…ç½®
cmd = [
    'mmdc',
    '-i', temp_mmd,
    '-o', str(output_path),
    '-w', '2000',      # å®½åº¦ï¼ˆpxï¼‰
    '-s', '3',         # ç¼©æ”¾å€æ•°ï¼ˆ1-5ï¼‰
    '-b', 'transparent' # èƒŒæ™¯ï¼ˆtransparent/whiteï¼‰
]
```

## ğŸ“Š è´¨é‡å¯¹æ¯”

| æŒ‡æ ‡ | åœ¨çº¿ API | æœ¬åœ° CLI |
|------|----------|----------|
| å°ºå¯¸ | 784x95 | **5952x729** |
| æ–‡ä»¶ | 9 KB | **95 KB** |
| æ¸…æ™°åº¦ | âŒ | âœ… |
| ç¨³å®šæ€§ | âš ï¸  | âœ… |
| å¯æ§æ€§ | âŒ | âœ… |

## ğŸ› æ•…éšœæ’é™¤

### 1. mmdc å‘½ä»¤æœªæ‰¾åˆ°

```bash
# æ£€æŸ¥å®‰è£…
which mmdc

# å¦‚æœæ²¡æœ‰ï¼Œé‡æ–°å®‰è£…
npm install -g @mermaid-js/mermaid-cli
```

### 2. å›¾ç‰‡ç”Ÿæˆå¤±è´¥

```bash
# æŸ¥çœ‹ Mermaid è¯­æ³•æ˜¯å¦æ­£ç¡®
# è®¿é—® https://mermaid.live ç²˜è´´ä»£ç éªŒè¯
```

### 3. é£ä¹¦å›¾ç‰‡ä¸æ˜¾ç¤º

```bash
# ç¡®ä¿å·²æ¨é€åˆ° GitHub
git push

# ç­‰å¾… 1-2 åˆ†é’Ÿï¼ˆGitHub CDN ç¼“å­˜ï¼‰
# åˆ·æ–°é£ä¹¦é¡µé¢
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
scripts/
  â””â”€â”€ build.py          # å”¯ä¸€æ„å»ºè„šæœ¬
  â””â”€â”€ README.md         # æœ¬æ–‡æ¡£

doc/
  â”œâ”€â”€ LangChain1.0æ·±åº¦å­¦ä¹ æŒ‡å—.md        # æºæ–‡æ¡£ï¼ˆç¼–è¾‘è¿™ä¸ªï¼‰
  â”œâ”€â”€ LangChain1.0æ·±åº¦å­¦ä¹ æŒ‡å—_feishu.md # é£ä¹¦ç‰ˆæœ¬ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
  â””â”€â”€ images/                             # æµç¨‹å›¾ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
      â”œâ”€â”€ diagram_1_xxx.png
      â”œâ”€â”€ diagram_2_xxx.png
      â””â”€â”€ ...
```

## ğŸ¯ å·¥ä½œæµç¨‹

```
ç¼–è¾‘æºæ–‡æ¡£ï¼ˆä¿®æ”¹ Mermaidï¼‰
    â†“
python scripts/build.py
    â†“
æ£€æŸ¥ doc/images/ ä¸­çš„æ–°å›¾ç‰‡
    â†“
git add & commit & push
    â†“
GitHub è‡ªåŠ¨æ›´æ–°å›¾ç‰‡ URL
    â†“
é£ä¹¦é‡æ–°å¯¼å…¥ _feishu.md
    â†“
å®Œæˆï¼
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä¿®æ”¹å‰å…ˆå¤‡ä»½**ï¼š
   ```bash
   cp doc/LangChain1.0æ·±åº¦å­¦ä¹ æŒ‡å—.md doc/backup.md
   ```

2. **ä¿®æ”¹åç«‹å³éªŒè¯**ï¼š
   ```bash
   open doc/images/diagram_1_xxx.png  # macOS
   ```

3. **å®šæœŸæ¸…ç†**ï¼š
   ```bash
   # åˆ é™¤æ—§çš„å“ˆå¸Œç‰ˆæœ¬å›¾ç‰‡
   ls doc/images/ | grep -v $(git log -1 --format=%h)
   ```

## ğŸ“š ç›¸å…³èµ„æº

- Mermaid å®˜æ–¹æ–‡æ¡£ï¼šhttps://mermaid.js.org
- Mermaid Live Editorï¼šhttps://mermaid.live
- mermaid-cli æ–‡æ¡£ï¼šhttps://github.com/mermaid-js/mermaid-cli

